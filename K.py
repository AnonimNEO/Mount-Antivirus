#–î–∞–Ω–Ω–æ–µ –°–≤–æ–±–æ–¥–Ω–æ–µ –ü—Ä–æ–≥—Ä–∞–º–º–Ω–æ–µ –û–±–µ—Å–ø–µ—á–µ–Ω–∏–µ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ –ª–∏—Ü–µ–Ω–∑–∏–∏ GPL-3.0-only –∏–ª–∏ GPL-3.0-or-later
#–í—ã –∏–º–µ–µ—Ç–µ –ø—Ä–∞–≤–æ –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å, –∏–∑–º–µ–Ω—è—Ç—å, —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è—Ç—å, –≤–∑–∏–º–∞—Ç—å –ø–ª–∞—Ç—É –∑–∞ —Ñ–∏–∑–∏—á–µ—Å–∫–∏–π –∞–∫—Ç –ø–µ—Ä–µ–¥–∞—á–∏ –∫–æ–ø–∏–∏, –∏ –≤—ã –º–æ–∂–µ—Ç–µ –ø–æ —Å–≤–æ–µ–º—É —É—Å–º–æ—Ç—Ä–µ–Ω–∏—é –ø—Ä–µ–¥–ª–∞–≥–∞—Ç—å –≥–∞—Ä–∞–Ω—Ç–∏–π–Ω—É—é –∑–∞—â–∏—Ç—É –≤ –æ–±–º–µ–Ω –Ω–∞ –ø–ª–∞—Ç—É
#–î–õ–Ø –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Ø –î–ê–ù–ù–û–ì–û –°–í–û–ë–û–î–ù–û–ì–û –ü–†–û–ì–†–ê–ú–ú–ù–û–ì–û –û–ë–ï–°–ü–ï–ß–ï–ù–ò–Ø, –í–ê–ú –ù–ï –¢–†–ï–ë–£–ï–¢–°–Ø –ü–†–ò–ù–Ø–¢–ò–ï –õ–ò–¶–ï–ù–ó–ò–ò Gnu GPL v3.0 –∏–ª–∏ –±–æ–ª–µ–µ –ø–æ–∑–¥–Ω–µ–π –≤–µ—Ä—Å–∏–∏
#–í –°–õ–£–ß–ê–ï –†–ê–°–ü–†–û–°–¢–†–ê–ù–ï–ù–ò–Ø –û–†–ò–ì–ò–ù–ê–õ–¨–ù–û–ô –ü–†–û–ì–†–ê–ú–ú–´ –ò/–ò–õ–ò –ú–û–î–ï–†–ù–ò–ó–ò–†–û–í–ê–ù–ù–û–ô –í–ï–†–°–ò–ò –ò/–ò–õ–ò –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–ï –ò–°–•–û–î–ù–ò–ö–û–í –í –°–í–û–ï–ô –ü–†–û–ì–†–ê–ú–ú–ï, –í–´ –û–ë–Ø–ó–ê–ù–´ –ó–ê–î–û–ö–£–ú–ï–ù–¢–ò–†–û–í–ê–¢–¨ –í–°–ï –ò–ó–ú–ï–ù–ï–ù–ò–Ø –í –ö–û–î–ï –ò –ü–†–ï–î–û–°–¢–ê–í–ò–¢–¨ –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø–ú –í–û–ó–ú–û–ñ–ù–û–°–¢–¨ –ü–û–õ–£–ß–ò–¢–¨ –ò–°–•–û–î–ù–ò–ö–ò –í–ê–®–ï–ô –ö–û–ü–ò–ò –ü–†–û–ì–†–ê–ú–ú–´, –ê –¢–ê–ö–ñ–ï –£–ö–ê–ó–ê–¢–¨ –ê–í–¢–û–†–°–¢–í–û –î–ê–ù–ù–û–ì–û –ü–†–û–ì–†–ê–ú–ú–ù–û–ì–û –û–ë–ï–°–ü–ï–ß–ï–ù–ò–Ø
#–ü–†–ò –†–ê–°–ü–†–û–°–¢–†–ê–ù–ï–ù–ò–ò –ü–†–û–ì–†–ê–ú–ú–´ –í–´ –û–ë–Ø–ó–ê–ù–´ –ü–†–ï–î–û–°–¢–ê–í–ò–¢–¨ –í–°–ï –¢–ï–ñ–ï –ü–†–ê–í–ê –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Æ –ß–¢–û –ò –ú–´ –í–ê–ú, –ê –¢–ê–ö–ñ–ï –õ–ò–¶–ï–ù–ó–ò–Ø GPL v3
#–ü—Ä–æ—á–∏—Ç–∞—Ç—å –ø–æ–ª–Ω—É—é –≤–µ—Ä—Å–∏—é –ª–∏—Ü–µ–Ω–∑–∏–∏ –≤—ã –º–æ–∂–µ—Ç–µ –ø–æ —Å—Å—ã–ª–∫–µ –§–æ–Ω–¥–∞ –°–≤–æ–±–æ–¥–Ω–æ–≥–æ –ü—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ –û–±–µ—Å–ø–µ—á–µ–Ω–∏—è - https://www.gnu.org/licenses/gpl-3.0.html
#–ò–ª–∏ –≤ —Ñ–∞–π–ª–µ COPYING.txt –≤ –∞—Ä—Ö–∏–≤–µ —Å —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫–æ–º
#Copyleft üÑØ NEO Organization, Departament K 2024 - 2025
#Coded by @AnonimNEO (Telegram)

knot_version = "0.5.5 Beta"

symbol_list = '`~!@#$%^&*()"‚Ññ;:?-_+=[]{}|/\<>.,' + "'"
cyrillic_list = "–∞–±–≤–≥–¥–µ—ë–∂–∑–∏–π–∫–ª–º–æ–ø—Ä—Å—Ç—É—Ñ—ä—Ü—á—à—â—ä—ã—å—ç—é—è"
latin_list = "abcdefghijklmnopstuvxyz"
number_list = "0123456789"

def K(code, text, encryption=True, debug_mode=False):
	if debug_mode:
		print(f"–®–∏—Ñ—Ä–æ–≤—â–∏–∫ –£–∑–µ–ª –≤–µ—Ä—Å–∏–∏ {knot_version}")
		print("–í–∫–ª—é—á–µ–Ω Debug Mode")
		print(f"–ö–ª—é—á –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è: {code}\n–¢–µ–∫—Å—Ç: {text}\n–®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ: {encryption}")
	text = text.lower()
	final_text = ""
	if len(code) < len(text):
		result_len = len(text) - len(code)
		result_code = code
		final_for = -1
		for i in range(result_len):
			if i > len(code):
				final_for += 1
				result_code += code[final_for]
			elif i < len(code):
				result_code += code[i]
		code = result_code

	def varible_symbol(index, list, _number_code=0):
		_number_code = int(_number_code)
		index += _number_code
		while True:
			index -= len(list)
			if index == len(list)-1 or index == len(list):
				print("sas")
				index -= len(list)
			if index < len(list)-1:
				break
		return index

	try:
		a = int(code)
		del(a)
	except Exception:
		if debug_mode:
			print("–ö–æ–¥ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è —Å–æ–¥–µ—Ä–∂–∏—Ç –±—É–∫–≤—ã –ø–µ—Ä–µ–≤–æ–¥ –≤ —á–∏—Å–ª–∞...")
		final_code = ""
		for i in range(len(code)):
			number = code[i]
			_code = code[i]

			if _code in cyrillic_list:
				_code_ = cyrillic_list.index(_code)
			elif _code in latin_list:
				_code_ = latin_list.index(_code)
			elif _code in number_list:
				_code_ = number_list.index(_code)
			elif _code in symbol_list:
				_code_ = symbol_list.index(_code)

			if number in cyrillic_list:
				#_number = cyrillic_list.index(number)
				#if (_number+_code_) > len(cyrillic_list)-1:
				#	number = varible_symbol(_number, cyrillic_list, _code_)
				final_number = cyrillic_list.index(_code)
			elif number in latin_list:
				#_number = latin_list.index(number)
				#if (_number+_code_) > len(latin_list)-1:
				#	number = varible_symbol(_number, latin_list, _code_)
				final_number = latin_list.index(_code)
			elif number in number_list:
				if not encryption:
					number = int(number)
					number = -number
				number = int(number)
				if (number+_code_) > len(number_list)-1:
					number = varible_symbol(number, number_list, _code_)
				final_number = number_list[number]
			elif number in symbol_list:
				#_number = symbol_list.index(number)
				#if (_number+_code_) > len(symbol_list)-1:
				#	number = varible_symbol(_number, symbol_list, _code_)
				final_number = symbol_list.index(_code)
			else:
				print("–û–±–Ω–∞—Ä—É–∂–µ–Ω –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π —Å–∏–º–≤–æ–ª, –ø—Ä–æ–ø—É—Å–∫")
				final_number = number

			final_code += str(final_number)

		code = final_code

	if debug_mode:
		print("–†–∞–±–æ—Ç–∞ —Å —Ç–µ–∫—Å—Ç–æ–º...")

	for i in range(len(text)):
		letter = text[i]
		if encryption:
			number_code = code[i]
			_number_code = int(number_code)
			if _number_code == 0:
				_number_code = 1
		elif not encryption:
			number_code = code[i]
			number_code = int(number_code)
			if number_code == 0:
				_number_code = -1
			else:
				_number_code = -number_code

		current_list = None
		if letter in cyrillic_list:
			current_list = cyrillic_list
		elif letter in latin_list:
			current_list = latin_list
		elif letter in number_list:
			current_list = number_list
		elif letter in symbol_list:
			current_list = symbol_list

		if current_list:
			index_letter = current_list.index(letter)
			new_index = (index_letter + _number_code) % len(current_list)
			final_letter = current_list[new_index]
		else:
			final_letter = letter

		final_text += final_letter

	final_text += final_letter

	return final_text